<template name="Vendor_List_Page">
  {{#If_Logged_In}}
  {{#if Template.subscriptionsReady}}
  <div class="ui container" style="margin-top: 20px">
    <div class="ui grid" style="padding-top: 20px; padding-bottom: 20px;">

      <div class="ui column">
        <div class="ui basic segment">
          <table class="ui celled padded center aligned table">
            <thead>
            <tr>
              <th class="one wide">Open</th>
              <th class="two wide">Vendor</th>
              <th class="two wide">Location</th>
              <th class="five wide">Description</th>
              <th class="two wide">Rating</th>
            </tr>
            </thead>
            <tbody>
            {{#each vendor in VendorsList}}
            <tr>
              <td>
                {{#if isOpen vendor }}
                <i class="ui green circle icon"></i>
                {{else}}
                <i class="ui red circle icon"></i>
                {{/if}}
              </td>
              <td>
                <a href="{{pathFor 'Vendor_Home_Page' _id=vendor._id}}">
                  <img class="ui centered image" style="height: 50px; " src="/images/{{vendorImage vendor}}"/>
                </a>
              </td>
              <td>{{vendor.location}}</td>
              <td>{{vendor.description}}</td>
              <td>
                <div class="ui star rating" data-rating={{averageRating vendor}} data-max-rating="5">
                </div><br/>
                {{reviewCount vendor}} reviews
              </td>
            </tr>
            {{/each}}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  <script>
    $('.ui.rating')
        .rating('disable')
    ;

  </script>
  {{else}}
  {{> Loading}}
  {{/if}}
  {{/If_Logged_In}}
</template>

